<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Crazylib Module &mdash; Crazy Trajectories 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Crazy Trajectories 1.0.0 documentation" href="index.html" />
    <link rel="next" title="The Trajectory Module" href="trajectorylib.html" />
    <link rel="prev" title="Examples" href="examples.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-crazylib">
<span id="the-crazylib-module"></span><h1>The Crazylib Module<a class="headerlink" href="#module-crazylib" title="Permalink to this headline">¶</a></h1>
<p>This module contains all functions concerning the trajectories and motion planning
of the crzyflie.</p>
<dl class="function">
<dt id="crazylib.discrete_AKF_update">
<code class="descclassname">crazylib.</code><code class="descname">discrete_AKF_update</code><span class="sig-paren">(</span><em>x</em>, <em>u</em>, <em>z</em>, <em>zhist</em>, <em>A</em>, <em>B</em>, <em>C</em>, <em>P</em>, <em>Q</em>, <em>R</em>, <em>trajectory</em>, <em>t</em>, <em>Ts</em><span class="sig-paren">)</span><a class="headerlink" href="#crazylib.discrete_AKF_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an asynchronous kalman update and returns the new state
estimation and covariance matrix. Can handle emtpy control
signals and empty B. Currently no warnings are issued if
used improperly, which should be fixed in future iterations.
This function is very adapted to the problem at hand and should
not be used outside of the kinect node.</p>
<p>N&lt;=M and 0&lt;K&lt;=M are integers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>np.array of shape (M,1).</em>) &#8211; State estimate at t = h*(k-1)</li>
<li><strong>u</strong> (<em>np.array of shape (N,1), emty list or None.</em>) &#8211; If applicable, control signals at t = h*(k-1)</li>
<li><strong>z</strong> (<em>np.array of shape (K,1).</em>) &#8211; Measurements at t = h*k.</li>
<li><strong>P</strong> (<em>np.array of shape (M,M).</em>) &#8211; Covariance at the previous update.</li>
<li><strong>Q</strong> (<em>np.array of shape (M,M).</em>) &#8211; Estimated covariance matrix of state noise.</li>
<li><strong>R</strong> (<em>np.array of shape (K,K).</em>) &#8211; Estimated covariance matrix of measurement noise.</li>
<li><strong>trajectory</strong> (<em>Vectorvalued function handle.</em>) &#8211; Intended acceleration trajectory.</li>
<li><strong>t</strong> (<em>float.</em>) &#8211; The current time.</li>
<li><strong>Ts</strong> (<em>float.</em>) &#8211; The timestep at which the new data is generated by openni.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">xhat, Pnew</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array (12,1), np.array (12,12)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crazylib.discrete_KF_update">
<code class="descclassname">crazylib.</code><code class="descname">discrete_KF_update</code><span class="sig-paren">(</span><em>x</em>, <em>u</em>, <em>z</em>, <em>A</em>, <em>B</em>, <em>C</em>, <em>P</em>, <em>Q</em>, <em>R</em><span class="sig-paren">)</span><a class="headerlink" href="#crazylib.discrete_KF_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a discrete kalman update and returns the new state
estimation and covariance matrix. Can handle empy control
signals and empty B. Currently no warnings are issued if
used improperly, which should be fixed in future iterations.
if z is set to None, the update step is ignored and only prediction
is used.</p>
<p>N&lt;=M and 0&lt;K&lt;=M are integers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>np.array of shape (M,1).</em>) &#8211; State estimate at t = h*(k-1)</li>
<li><strong>u</strong> (<em>np.array of shape (N,1), emty list or None.</em>) &#8211; If applicable, control signals at t = h*(k-1)</li>
<li><strong>z</strong> (<em>np.array of shape (K,1).</em>) &#8211; Measurements at t = h*k.</li>
<li><strong>P</strong> (<em>np.array of shape (M,M).</em>) &#8211; Covariance at the previous update.</li>
<li><strong>Q</strong> (<em>np.array of shape (M,M).</em>) &#8211; Estimated covariance matrix of state noise.</li>
<li><strong>R</strong> (<em>np.array of shape (K,K).</em>) &#8211; Estimated covariance matrix of measurement noise.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">xhat, Pnew</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array (12,1), np.array (12,12)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crazylib.discrete_UKF_update">
<code class="descclassname">crazylib.</code><code class="descname">discrete_UKF_update</code><span class="sig-paren">(</span><em>x</em>, <em>u</em>, <em>z</em>, <em>F</em>, <em>H</em>, <em>param</em>, <em>P</em>, <em>Q</em>, <em>R</em><span class="sig-paren">)</span><a class="headerlink" href="#crazylib.discrete_UKF_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a companion unscented kalman update and returns the new state
estimation and covariance matrix. Currently no warnings are issued if
used improperly, which should be fixed in future iterations.
This is a very general implementation, with the limitation that noise
is assumed to be zero mean. The current parameters should be outsourced
to param, and are currently set to yeld good result for white gaussian
noise.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>np.array of shape (M,1)</em>) &#8211; State estimate at t = h*(k-1)</li>
<li><strong>u</strong> (<em>np.array of shape (N,1), emty list or None.</em>) &#8211; If applicable, control signals at t = h*(k-1)</li>
<li><strong>z</strong> (<em>np.array of shape (K,1)</em>) &#8211; Measurements at t = h*k.</li>
<li><strong>F</strong> (<em>function handle of type F(x,u,param).</em>) &#8211; Nonlinear state equations in discrete time. Returns an (M,1)
numpy array as the first arg.</li>
<li><strong>G</strong> (<em>function handle of type H(x,param).</em>) &#8211; Nonlinear measurement equations in discrete time. Returns an
(K,1) numpy array as the first arg.</li>
<li><strong>param</strong> (<em>Dictionary</em>) &#8211; Parameter dictionary with quadcopter coefficients.</li>
<li><strong>P</strong> (<em>np.array of shape (M,M).</em>) &#8211; Covariance at the previous update.</li>
<li><strong>Q</strong> (<em>np.array of shape (M,M).</em>) &#8211; Estimated covariance matrix of state noise.</li>
<li><strong>R</strong> (<em>np.array of shape (K,K).</em>) &#8211; Estimated covariance matrix of measurement noise.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">xhat, Pnew</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array (12,1), np.array (12,12)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crazylib.print_progress">
<code class="descclassname">crazylib.</code><code class="descname">print_progress</code><span class="sig-paren">(</span><em>iteration</em>, <em>total</em>, <em>prefix=''</em>, <em>suffix=''</em>, <em>decimals=2</em>, <em>barLength=30</em><span class="sig-paren">)</span><a class="headerlink" href="#crazylib.print_progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints progress bar in terminal window</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>iteration</strong> (<em>int</em>) &#8211; The current iteration.</li>
<li><strong>total</strong> &#8211; The total number of iterations before completion.</li>
<li><strong>prefix</strong> &#8211; Empty by default, specifies text before the progress bar.</li>
<li><strong>suffix</strong> &#8211; Empty by default, specifies text after the progress bar.</li>
<li><strong>decimals</strong> &#8211; Number of decimals in the percentage calculation.</li>
<li><strong>barLength</strong> &#8211; The progress bar length.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crazylib.quadcopter_dynamics">
<code class="descclassname">crazylib.</code><code class="descname">quadcopter_dynamics</code><span class="sig-paren">(</span><em>x</em>, <em>u</em>, <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#crazylib.quadcopter_dynamics" title="Permalink to this definition">¶</a></dt>
<dd><p>The Tait-Bryan model of the quadcopter which is used in non-linear
state estimation on the host and for simulation purposes. The state is
updated internally and updated on every time step with reference to the
input control signal omega. The parameters defining the process and states
are loaded from a parameter dictionary on the same for as that used in the
configuration file (see /config/).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>np.array of shape (12,1)</em>) &#8211; State vector x = [p, dp, eta, deta]^T at a time k.</li>
<li><strong>u</strong> (<em>np.array of shape (4,1)</em>) &#8211; Control signals on the form [T, tau_x, tau_y, tau_z]^T at a time k.</li>
<li><strong>param</strong> (<em>Dictionary</em>) &#8211; Parameter dictionary with quadcopter coefficients.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">xout, yout</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array (12,1), np.array (M,1) as specified in C</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="project.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Crazylib Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectorylib.html">The Trajectory Module</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="examples.html" title="previous chapter">Examples</a></li>
      <li>Next: <a href="trajectorylib.html" title="next chapter">The Trajectory Module</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/crazylib.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Marcus Greiff.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/crazylib.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>